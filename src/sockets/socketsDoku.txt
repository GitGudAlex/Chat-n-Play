Wichtig: Alles wird als JSON Object an den Server übergeben und umgekehrt


Server                      Client 1                                   Client 2


Raum Erstellung:

    room:create({ gameTypeId })
<-----------------------------------
    room:created({ roomId })
----------------------------------->



Raum Joinen (vom Ersteller):

    room:join({ roomId, username })
<-----------------------------------
    room:joined({ gameTypeId, hostId, players[] })
----------------------------------->



Raum Joinen (andere Spieler):

                    room:join({ roomId, username })
<---------------------------------------------------------------------------
    chat:message({ player, text }) 
    (player: "", text: "player ... has joined the game...") 
    => player ist leer, wenn die Nachricht vom System kommt
----------------------------------->
    room:update({ players[], hostId }) 
----------------------------------->
                room:joined({ gameTypeId, hostId, players[] })
--------------------------------------------------------------------------->



Nachricht senden:

    chat:sendMessage({ text })
<-----------------------------------
    chat:message({ 'Du', text })
----------------------------------->
    chat:message({ username, text })
--------------------------------------------------------------------------->



Disconnect (nicht letzter Spieler im Raum & kein Host):

        disconnect()
    => wird automatisch ausgelöst, wenn
    ein socket/spieler disconnectet
<---------------------------------------------------------------------------
    chat:message({ username, text })
    (player: "", text: "player ... has left the game...")
----------------------------------->
    room:update({ players[], hostId }) 
----------------------------------->



Disconnect (nicht letzter Spieler im Raum & ist Host):

        disconnect()
<----------------------------------
    chat:message({ username, text })
    (player: "", text: "player ... has left the game...")
--------------------------------------------------------------------------->
--------------------------------------------------------------------------------------- ..... ------------->
    chat:message({ 'Du', text })
    (player: "", text: "Du ... bist der neue Host...")
--------------------------------------------------------------------------->
    chat:message({ username, text })
    (player: "", text: "player ... is the new host..")
--------------------------------------------------------------------------------------- ..... ------------->
    room:hostChanged({ hostId })
--------------------------------------------------------------------------->
--------------------------------------------------------------------------------------- ..... ------------->
    room:update({ players[], hostId })
--------------------------------------------------------------------------->
--------------------------------------------------------------------------------------- ..... ------------->


Disconnect (ist letzter Spieler im Raum):

        disconnect()
<----------------------------------